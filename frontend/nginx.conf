server {
    # Слушаем на порту 80 (стандартный HTTP порт)
    listen 80;
    
    # Корневая директория, откуда nginx будет отдавать файлы
    # Это папка, куда мы скопировали собранные файлы из dist
    root /usr/share/nginx/html;
    
    # Файл по умолчанию (главная страница)
    index index.html;

    # ============================================
    # ВАЖНО: Обработка React Router
    # ============================================
    # React Router работает на клиенте (в браузере)
    # Когда пользователь переходит на /admin или /profile,
    # браузер отправляет запрос на сервер
    # Но на сервере нет файла /admin/index.html!
    # Поэтому мы говорим nginx: "Если файл не найден,
    # отдай index.html, и пусть React сам разберётся"
    
    location / {
        try_files $uri $uri/ /index.html;
    }

    # ============================================
    # Кеширование статических файлов
    # ============================================
    # Файлы .js, .css, .png и т.д. можно кешировать надолго
    # Они не меняются часто, зачем каждый раз качать?
    
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # ============================================
    # Безопасность
    # ============================================
    # Скрываем версию nginx (не обязательно, но хорошая практика)
    server_tokens off;
}

